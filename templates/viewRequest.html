<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B2C</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/details.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='images/Head2.png') }}" type="image/x-icon">
</head>
<body>
    <div class="container">
        <div class="logoNav">
            <div class="logo">
                <img src="{{ url_for('static', filename='images/logo2.png') }}" alt="B2C Logo">
            </div>
        </div>

        <div class="backBtn">
            <img class="chevron" src="{{ url_for('static', filename='images/Less.svg') }}" alt="Chevron Icon">
            <div class="btn-title">
                <p><a href ="{{ url_for('main_bp.update_challange_board') }}">Back to challenges</a></p>
            </div>
        </div>

        <div class="details">
            <div class="title">
                <p>{{ request_obj.title }}</p>
            </div>

            <div class="location">
                <div class="locationTitle">
                    <p>Customer Name:</p>
                </div>
                <p>{{ request_obj.user.full_name }}</p>
            </div>

            <div class="location">
                <div class="locationTitle">
                    <p>Email:</p>
                </div>
                <p>{{ request_obj.user.email }}</p>
            </div>

            <div class="location">
                <div class="locationTitle">
                    <p>Phone Number:</p>
                </div>
                <p>{{ request_obj.user.phone_number }}</p>
            </div>

            <div class="location">
                <div class="locationTitle">
                    <p>Support Type Required:</p>
                </div>
                <p>{{ ', '.join(request_obj.support_type) }}</p>
            </div>


            <div class="ar-btns">
                
                {% if request_obj.status == 'Accepted' %}
                    <!-- Show the "DELETE" button for completed requests -->
                    <div class="del-btn">
                        <form method="post" action="{{ url_for('main_bp.reject_request', request_id=request_obj.id) }}">
                            <button type="submit">DELETE</button>
                        </form>
                    </div>
                {% else %}
                    <!-- Show the "ACCEPT" and "REJECT" buttons for other requests -->
                    <div class="apply-btn">
                        <form method="post" action="{{ url_for('main_bp.accept_request', request_id=request_obj.id) }}">
                            <button type="submit">ACCEPT</button>
                        </form>
                    </div>

                    <div class="del-btn">
                        <form method="post" action="{{ url_for('main_bp.reject_request', request_id=request_obj.id) }}">
                            <button type="submit">REJECT</button>
                        </form>
                    </div>
                {% endif %}

            </div>

            <div class="desTitle">
                <p>Description</p>
            </div>

            <div class="description">
                <p>{{ request_obj.description | safe }}</p>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="location2">
                <p>Udugu Open House<br>42 Harvey Brown Milton Park Harare </p>
                <p>+263 242 250 602</p>
            </div>
            <div class="socials">
                <p>Join Us On Social Media </p>
                <div class="social-icons">
                    <img class="fb" src="{{ url_for('static', filename='images/Facebook.png') }}" alt="Facebook">
                    <img class="x" src="{{ url_for('static', filename='images/X.png') }}" alt="X">
                    <img class="wa" src="{{ url_for('static', filename='images/Whatsapp.png') }}" alt="Whatsapp">
                </div>
            </div>
        </div>
    </footer>
</body>
</html>
